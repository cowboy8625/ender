const vm = @import("./machine.zig");

pub fn main() !void {
    const program = [_]u8{
        0x01, 0x01, 0x00, 0x00, // ensure that register 1 is empty
        0x01, 0x00, 0x00, 0x48, // input 'H' in register 0
        0x02, 0x01, 0x00, 0x00, // put 'H' on heap
        0x05, 0x01, 0x00, 0x00, // increment register 1
        0x01, 0x00, 0x00, 0x65, // input 'e' in register 0
        0x02, 0x01, 0x00, 0x00, // put 'e' on heap
        0x05, 0x01, 0x00, 0x00, // increment register 1
        0x01, 0x00, 0x00, 0x6C, // input 'l' in register 0
        0x02, 0x01, 0x00, 0x00, // put 'l' on heap
        0x05, 0x01, 0x00, 0x00, // increment register 1
        0x02, 0x01, 0x00, 0x00, // put 'l' on heap
        0x01, 0x00, 0x00, 0x6f, // input 'o' in register 0
        0x05, 0x01, 0x00, 0x00, // increment register 1
        0x02, 0x01, 0x00, 0x00, // put 'o' on heap
        0x01, 0x00, 0x00, 0x20, // input ' ' in register 0
        0x05, 0x01, 0x00, 0x00, // increment register 1
        0x02, 0x01, 0x00, 0x00, // put ' ' on heap
        0x01, 0x00, 0x00, 0x57, // input 'W' in register 0
        0x05, 0x01, 0x00, 0x00, // increment register 1
        0x02, 0x01, 0x00, 0x00, // put 'W' on heap
        0x01, 0x00, 0x00, 0x6f, // input 'o' in register 0
        0x05, 0x01, 0x00, 0x00, // increment register 1
        0x02, 0x01, 0x00, 0x00, // put 'o' on heap
        0x01, 0x00, 0x00, 0x72, // input 'r' in register 0
        0x05, 0x01, 0x00, 0x00, // increment register 1
        0x02, 0x01, 0x00, 0x00, // put 'r' on heap
        0x01, 0x00, 0x00, 0x6c, // input 'l' in register 0
        0x05, 0x01, 0x00, 0x00, // increment register 1
        0x02, 0x01, 0x00, 0x00, // put 'l' on heap
        0x01, 0x00, 0x00, 0x64, // input 'd' in register 0
        0x05, 0x01, 0x00, 0x00, // increment register 1
        0x02, 0x01, 0x00, 0x00, // put 'd' on heap
        0x01, 0x00, 0x00, 0x21, // input '!' in register 0
        0x05, 0x01, 0x00, 0x00, // increment register 1
        0x02, 0x01, 0x00, 0x00, // put 'd' on heap
        0x01, 0x00, 0x00, 0x0A, // input '\n' in register 0
        0x05, 0x01, 0x00, 0x00, // increment register 1
        0x02, 0x01, 0x00, 0x00, // put '\n' on heap
        0x01, 0x00, 0x00, 0x01, // load register 0 with 1 for a write syscall
        0x01, 0x01, 0x00, 0x00, // load register 1 with the string location
        0x01, 0x02, 0x00, 0x0D, // load 13 into register 2 aka the length of the string
        0x09, 0x00, 0x00, 0x00, // syscall
        0x01, 0x00, 0x00, 0x00, // load register 0 with 0 for a write syscall
        0x01, 0x01, 0x00, 0x0A, // load register 0 with 10 for the exit code
        0x09, 0x00, 0x00, 0x00, // syscall
    };
    var machine = vm.Machine.init(&program);
    machine.run();
}
